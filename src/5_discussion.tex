\chapter{Discussion}

\section{Interpretation of Findings}
\subsection{Adherence to LTE Standards and Simulation Limitations}
Our study begins with a simulation of an LTE network using srsRAN, ZMQ and GNU Radio. Through this simulation, we confirmed srsRAN's adherence to the LTE standard during handover. We found that the hysteresis parameter behaves as expected, while TTT was not explored due to the limitations in data collection from the simulation. While useful for understanding handover, this simulation was limited in its insights on indoor environments due to the lack of realistic models for constrained environments. This prompted us to use an LTE testbed to gather real-world data for analysis.

\subsection{Insights from Custom Network Simulator}
While srsRAN provides a standards-conforming implementation of LTE, we can instead build a custom simulator that, while it cannot emulate a real network, can instead gather data on handover behaviour in large-scale systems. This allowed us to find a clear link between the hysteresis parameter and the ping-pong rate, with a minor relation to the TTT trigger. This result was expected from \citet{hatipoglu_handover-based_2020} and further validated with our experiments later in our testbed; nevertheless, it reinforced our understanding and focused on real-world experimentation of testing different hysteresis parameters.

Similar to the srsRAN simulation, this network simulator was heavily limited by the simulation model; in this case, it used the log-distance path loss propagation model, which would not account for many of the indoor influences, such as LOS blockage, the rich multi-path environment, or increments in signal reflections due to furniture or angle of arrival. The approximation of human movement further limited it, so the experiment's results are only intended as a reference for further experimentation.

\subsection{Real-World Network Testbed Observations}
This paper focused on real-world network testbed observations to provide a realistic and comprehensive evaluation of indoor handover. 

Our initial experimentation started with exploring UE mobility and examining possible human movement patterns in two eNB scenarios. We explored four different behaviours: stationary, walking, rotating and LOS-blocking movement. We only saw the expected behaviour in our walking scenario; RSRP decreased proportionally to the distance to the eNBs and the UE, which triggered a handover once a UE moved closer to another eNB. However, the other three experiments deviated from expectations. Our static setup showed large spikes in RSRP with no explainable cause, leading us to believe that indoor signals are inherently less stable than outdoor transmission. We can hypothesise that this is due to the highly constrained environment, which leads to a rich multi-path environment. We can also hypothesise that the proximity of the UE and the eNBs may influence this.% \todo{check literature}

A rotating UE again deviated from expectations of a constant RSRP value, where RSRP had heavy fluctuations, causing multiple handovers, leading us to believe that the radiation was not omnidirectional; the angle of the UE impacted the signal strength. Our LOS blockage experiment also had greater-than-expected fluctuations in signal strength. From these experiments, we can hypothesise that further experiments will exhibit a high handover rate and that higher hysteresis values might be required to avoid unnecessary handovers -- alongside increased difficulty interpreting our experimentation results.
%\textcolor{orange}{this is expected as long as the fluctuations happened when the LOS is blockaged. After the blockage disappears, the RSRP comes back from normal behavior or value?}

We conducted further experiments on the latency and throughput impacts of handover. We chose UDP as a transmission protocol over TCP because it highlights our network's maximum throughput better. The latency induced by a handover was measured as a 95ms increase in RTT using the \texttt{ping} and \texttt{Wireshark} tools. Handover did not show the predicted drop in throughput. Instead, the network was characterised by handovers causing connection drops or reconnections. This indicates that the handovers, in scenarios with poor network resilience, should be minimised due to the risk of a connection failure.

Increasing the number of eNBs caused the issues encountered in two eNB setups to worsen drastically. There was a high handover rate even in stationary environments. From this, we conclude that indoor environments should try to minimise cell density, especially if the stationary signal fluctuations are reproduced in the deployment environment.

We finally performed an experiment examining the hysteresis threshold. This followed expectations, where increasing the hysteresis parameter monotonically reduced the number of handovers. Due to the instability of RSRP exhibited in earlier examinations, we can recommend higher hysteresis values be chosen for indoor environments at the cost of triggering handovers a bit late.

\section{Implications and Applications}
\subsection{Impact on Network Design and Management}
We can provide preliminary recommendations for network design and management from the experiments run in simulated environments and real-world testbeds. These recommendations should not be utilised naivelyâ€”instead, they are meant to provide a starting point for further research and experimentation in both the field and individual deployments.

\begin{itemize}
    \item Handover rate should be minimised in unreliable networks. As connections dropped often in our network during a handover event, the handover rate should be minimised to reduce the risk of a connection failure. Alternatively, the network robustness to handover failures must be prioritised to account for the high handover rate experienced due to RSRP fluctuations.
    \item High hysteresis values are preferred. A high hysteresis threshold can mitigate signal fluctuations, helping reduce handover. A hysteresis value that is too high could cause a device not to prioritise the closest eNB; however, in indoor deployments, the density of cells causes this to be less of an issue as we do not expect a UE to go out of range.
    \item Cell density should be minimised where possible. The RSRP fluctuations experienced cause the handover rate to scale with cell density. Increasing the distance between cells will lead to a lower handover rate.
\end{itemize}

\section{Limitations of the Study}
\subsection{Simulation Constraints}
As mentioned above, we experienced limitations in our simulation due to the environmental modelling. These limitations were, however, well understood and did not detract from the insights we gained. It did, however, limit the applicability of the results of both experiments, instead using the results to guide our real-world testing.

\subsection{Controlled Environment in Real-World Testing}
Our lab testbed provided realistic results; however, our experiments were limited due to the environment's controlled nature. We could only conduct experiments in a singular room configuration with fixed eNB positions. This highly limited the number of experiments that could be done, such as testing the impact of moving around corners indoors, moving through doorways and testing the effects of differing wall materials such as glass, wood and concrete. This limited our study to look at the effect of a constrained environment, albeit with the dynamic aspects induced by human movement.

\subsection{Network reliability}
The final limitation of the study was the lack of network resilience. Network failures were very common, as radio communication is inherently unreliable, requiring much more testing hours to extract meaningful data. This may also be a confounding factor in our results, where fluctuations in throughput and signal could be attributed to network instability rather than a product of the environment. To validate the results of this experiment, repeated testing on alternative hardware setups and different labs would be required.

\section{Discussion Summary}
To wrap up, we observed an erratic behaviour of the signal quality, even in static settings, which leads to triggering handover many times. The hysteresis can be tuned to avoid unnecessary handover but might trigger handover a bit late. Once handover is triggered, we measured a latency of 95ms and detected many reconnections. Overall, sensitive applications to high latency or connection failures would suffer from detrimental performance in indoor scenarios. We conclude that indoor handover is significantly challenging, and more research is needed.

\section{Future Work}
Much is needed to be done to further the studies starting in this paper, as the results of this paper are intended as a starting point for further research. We suggest four different avenues of research for later works.

\subsection{Improving Simulation Realism}
Our paper improved the simulation accuracy using real-world hardware and over-the-air radio communication. However, there is still a strong use case for simulated environments: the volume of data generated. If machine learning is used, a large volume of data is required to train the requisite models. The feasibility of gathering this data manually using a setup similar to our papers is low, so our simulated environments need to be improved.

The first avenue is to utilise better simulation models. The WINNER UMa \cite{yajnanarayana_5g_2020} model, in particular, was developed for dense urban environments and could be suited to emulate indoor environments with some modifications. Furthermore, human movement algorithms were developed to emulate outdoor movement, so they must be redeveloped to emulate indoor movement.

Finally, the custom simulator built uses an approximation of a mobility management unit, which will not necessarily conform to LTE standards and could deviate from a real handover process. We can account for this by integrating srsRAN into this simulator, using ZMQ to communicate between UEs, and controlling attenuation from the calculated propagation loss.

To further increase simulation accuracy, we can use real-world hardware, albeit with software-defined attenuation rather than over-the-air radio communication, by utilising the POWDER platform. 

\subsection{Extensive Real-World Experimentation}
Our current real-world studies are done in a single environment with a single testbed. More extensive studies are required to explore diverse environments to comprehensively understand indoor network behaviour. We have devised a list of alternative environments we hope to test in further studies:
\begin{description}[style=unboxed]
    \item[\textbf{Non-convex Rooms}] Our testing was constrained to a rectangular room. To better understand the effects of LOS blockage due to the physical room, we would require testing in non-convex rooms, such as L-shaped rooms, alcoves or non-straight corridors. This would allow testing and contrasting different eNB placements.
    \item[\textbf{Multi-room Deployments}] To better understand how moving through doorways impacts network performance, multi-room deployments are essential, i.e. have eNB based in multiple rooms. This is very important for indoor testing, as we can hypothesise that moving between rooms is a required handover event, which we do not want to suppress with our above strategies.
    \item[\textbf{Material Impact}] As we have tested in a single environment, we wish to test in an environment with different floor, ceiling and wall materials. This would allow us to test whether specific materials impact the network quality more than others, e.g. is there less signal attenuation through glass or drywall rather than a brick wall, or whether specific wall materials reduce signal reflection.
\end{description}

\subsection{Exploring Alternative Technologies and Protocols}
Finally, although this paper was incepted due to the forecasted deployment of 5G in an indoor environment, the experiments performed were done using LTE networks. This choice was made as srsRAN, our software stack, has a much more mature LTE implementation. We, therefore, believe that while our results are applicable due to the shared utilisation of the open-air radio communication, repeating these experiments with a 5G stack could yield further insights. This is due to the higher frequency used by 5G networks having different radio properties, for instance higher frequencies experience much higher signal absorption, and propagation loss.

\subsection{Predictive Handover}
Predictive handover is a vital goal for indoor deployments, allowing handover to be triggered before signal quality degrades. This goal is out of scope for this project, but we believe it will be a key area of research in the future. Drawing from the extensive literature on using Machine Learning in outdoor handover, we believe this to be a powerful tool for developing robust indoor handover. Due to the noisy signals seen in experimentation, however, we believe this would require additional heuristics than the existing algorithms.
